{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\mann-app\\\\src\\\\components\\\\MoodAnalytics.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { db } from \"../firebase\";\nimport { collection, query, orderBy, getDocs } from \"firebase/firestore\";\nimport { Line } from \"react-chartjs-2\";\nimport { Chart, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from \"chart.js\";\n\n// Register chart components for Chart.js v3+\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChart.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\nfunction formatDate(date) {\n  // YYYY-MM-DD\n  const d = new Date(date);\n  return d.toISOString().split(\"T\")[0];\n}\nexport default function MoodAnalytics() {\n  _s();\n  const [chartData, setChartData] = useState(null);\n  useEffect(() => {\n    // Fetch moods and process them\n    async function fetchMoodData() {\n      const q = query(collection(db, \"moods\"), orderBy(\"createdAt\", \"asc\"));\n      const snapshot = await getDocs(q);\n      // Group moods by date\n      let moodCounts = {};\n      snapshot.forEach(doc => {\n        const data = doc.data();\n        if (!data.createdAt) return;\n        const dateStr = formatDate(data.createdAt.toDate());\n        const mood = data.mood || \"UNKNOWN\";\n        if (!moodCounts[dateStr]) moodCounts[dateStr] = {};\n        if (!moodCounts[dateStr][mood]) moodCounts[dateStr][mood] = 0;\n        moodCounts[dateStr][mood]++;\n      });\n\n      // Prepare chart data\n      const labels = Object.keys(moodCounts).sort();\n      const moodTypes = [...new Set(labels.flatMap(d => Object.keys(moodCounts[d])))];\n      // Optional: Choose only mood types you care about (e.g., [\"HAPPY\", \"SAD\", ...])\n\n      // Dataset for each mood type\n      const datasets = moodTypes.map(mood => ({\n        label: mood,\n        data: labels.map(date => moodCounts[date][mood] || 0),\n        borderColor: getMoodColor(mood),\n        backgroundColor: getMoodColor(mood, 0.3),\n        fill: false,\n        tension: 0.3\n      }));\n      setChartData({\n        labels,\n        datasets\n      });\n    }\n    fetchMoodData();\n  }, []);\n\n  // You can customize colors per mood type\n  function getMoodColor(mood, alpha = 1) {\n    const colors = {\n      HAPPY: `rgba(0, 200, 83, ${alpha})`,\n      SAD: `rgba(33, 150, 243, ${alpha})`,\n      ANGRY: `rgba(244, 67, 54, ${alpha})`,\n      EXCITED: `rgba(255, 193, 7, ${alpha})`,\n      CALM: `rgba(0, 188, 212, ${alpha})`,\n      UNKNOWN: `rgba(158, 158, 158, ${alpha})`\n    };\n    return colors[mood] || `rgba(100,100,100,${alpha})`;\n  }\n  if (!chartData) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading mood analytics...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 26\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 800,\n      margin: \"2rem auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Mood Trends Over Time\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Line, {\n      data: chartData,\n      options: {\n        responsive: true,\n        plugins: {\n          legend: {\n            position: \"top\"\n          },\n          title: {\n            display: true,\n            text: \"Daily Mood Counts\"\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n_s(MoodAnalytics, \"9euvDhZ+n6eLTlbzwvHmNPhoqAw=\");\n_c = MoodAnalytics;\nvar _c;\n$RefreshReg$(_c, \"MoodAnalytics\");","map":{"version":3,"names":["React","useEffect","useState","db","collection","query","orderBy","getDocs","Line","Chart","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","register","formatDate","date","d","Date","toISOString","split","MoodAnalytics","_s","chartData","setChartData","fetchMoodData","q","snapshot","moodCounts","forEach","doc","data","createdAt","dateStr","toDate","mood","labels","Object","keys","sort","moodTypes","Set","flatMap","datasets","map","label","borderColor","getMoodColor","backgroundColor","fill","tension","alpha","colors","HAPPY","SAD","ANGRY","EXCITED","CALM","UNKNOWN","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","margin","options","responsive","plugins","legend","position","title","display","text","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/mann-app/src/components/MoodAnalytics.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { db } from \"../firebase\";\r\nimport { collection, query, orderBy, getDocs } from \"firebase/firestore\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Chart, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from \"chart.js\";\r\n\r\n// Register chart components for Chart.js v3+\r\nChart.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\r\n\r\nfunction formatDate(date) {\r\n  // YYYY-MM-DD\r\n  const d = new Date(date);\r\n  return d.toISOString().split(\"T\")[0];\r\n}\r\n\r\nexport default function MoodAnalytics() {\r\n  const [chartData, setChartData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Fetch moods and process them\r\n    async function fetchMoodData() {\r\n      const q = query(collection(db, \"moods\"), orderBy(\"createdAt\", \"asc\"));\r\n      const snapshot = await getDocs(q);\r\n      // Group moods by date\r\n      let moodCounts = {};\r\n      snapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        if (!data.createdAt) return;\r\n        const dateStr = formatDate(data.createdAt.toDate());\r\n        const mood = data.mood || \"UNKNOWN\";\r\n        if (!moodCounts[dateStr]) moodCounts[dateStr] = {};\r\n        if (!moodCounts[dateStr][mood]) moodCounts[dateStr][mood] = 0;\r\n        moodCounts[dateStr][mood]++;\r\n      });\r\n\r\n      // Prepare chart data\r\n      const labels = Object.keys(moodCounts).sort();\r\n      const moodTypes = [\r\n        ...new Set(labels.flatMap(d => Object.keys(moodCounts[d])))\r\n      ];\r\n      // Optional: Choose only mood types you care about (e.g., [\"HAPPY\", \"SAD\", ...])\r\n\r\n      // Dataset for each mood type\r\n      const datasets = moodTypes.map(mood => ({\r\n        label: mood,\r\n        data: labels.map(date => moodCounts[date][mood] || 0),\r\n        borderColor: getMoodColor(mood),\r\n        backgroundColor: getMoodColor(mood, 0.3),\r\n        fill: false,\r\n        tension: 0.3,\r\n      }));\r\n\r\n      setChartData({\r\n        labels,\r\n        datasets\r\n      });\r\n    }\r\n    fetchMoodData();\r\n  }, []);\r\n\r\n  // You can customize colors per mood type\r\n  function getMoodColor(mood, alpha = 1) {\r\n    const colors = {\r\n      HAPPY: `rgba(0, 200, 83, ${alpha})`,\r\n      SAD: `rgba(33, 150, 243, ${alpha})`,\r\n      ANGRY: `rgba(244, 67, 54, ${alpha})`,\r\n      EXCITED: `rgba(255, 193, 7, ${alpha})`,\r\n      CALM: `rgba(0, 188, 212, ${alpha})`,\r\n      UNKNOWN: `rgba(158, 158, 158, ${alpha})`,\r\n    };\r\n    return colors[mood] || `rgba(100,100,100,${alpha})`;\r\n  }\r\n\r\n  if (!chartData) return <div>Loading mood analytics...</div>;\r\n\r\n  return (\r\n    <div style={{ maxWidth: 800, margin: \"2rem auto\" }}>\r\n      <h3>Mood Trends Over Time</h3>\r\n      <Line\r\n        data={chartData}\r\n        options={{\r\n          responsive: true,\r\n          plugins: {\r\n            legend: { position: \"top\" },\r\n            title: { display: true, text: \"Daily Mood Counts\" }\r\n          }\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}