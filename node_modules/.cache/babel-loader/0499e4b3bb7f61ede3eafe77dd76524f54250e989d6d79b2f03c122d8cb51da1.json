{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\mann-app\\\\src\\\\components\\\\MoodDataExport.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { db } from \"../firebase\";\nimport { collection, query, orderBy, getDocs } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction convertArrayOfObjectsToCSV(data) {\n  if (!data || !data.length) return null;\n  const keys = Object.keys(data[0]);\n  const csvRows = [];\n\n  // Header row\n  csvRows.push(keys.join(\",\"));\n\n  // Data rows\n  data.forEach(row => {\n    const values = keys.map(key => {\n      let escaped = (\"\" + (row[key] || \"\")).replace(/\"/g, '\"\"');\n      if (escaped.search(/(\"|,|\\n)/g) >= 0) escaped = `\"${escaped}\"`;\n      return escaped;\n    });\n    csvRows.push(values.join(\",\"));\n  });\n  return csvRows.join(\"\\n\");\n}\nexport default function MoodDataExport() {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const handleExport = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const q = query(collection(db, \"moods\"), orderBy(\"createdAt\", \"asc\"));\n      const snapshot = await getDocs(q);\n      const moods = snapshot.docs.map(doc => {\n        const data = doc.data();\n        return {\n          mood: data.mood || \"\",\n          note: data.note || \"\",\n          createdAt: data.createdAt ? data.createdAt.toDate().toISOString() : \"\"\n        };\n      });\n      const csvData = convertArrayOfObjectsToCSV(moods);\n      if (!csvData) {\n        setError(\"No data available to export.\");\n        setLoading(false);\n        return;\n      }\n      const blob = new Blob([csvData], {\n        type: \"text/csv;charset=utf-8;\"\n      });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.setAttribute(\"download\", \"mood_history.csv\");\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n    } catch (err) {\n      setError(\"Failed to export data.\");\n      console.error(err);\n    }\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 400,\n      margin: \"1rem auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleExport,\n      disabled: loading,\n      style: {\n        padding: \"10px 20px\",\n        cursor: \"pointer\"\n      },\n      children: loading ? \"Exporting...\" : \"Export Mood History as CSV\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\",\n        marginTop: \"10px\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(MoodDataExport, \"Iz3ozxQ+abMaAIcGIvU8cKUcBeo=\");\n_c = MoodDataExport;\nvar _c;\n$RefreshReg$(_c, \"MoodDataExport\");","map":{"version":3,"names":["React","useState","db","collection","query","orderBy","getDocs","jsxDEV","_jsxDEV","convertArrayOfObjectsToCSV","data","length","keys","Object","csvRows","push","join","forEach","row","values","map","key","escaped","replace","search","MoodDataExport","_s","loading","setLoading","error","setError","handleExport","q","snapshot","moods","docs","doc","mood","note","createdAt","toDate","toISOString","csvData","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","err","console","style","maxWidth","margin","children","onClick","disabled","padding","cursor","fileName","_jsxFileName","lineNumber","columnNumber","color","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/mann-app/src/components/MoodDataExport.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { db } from \"../firebase\";\r\nimport { collection, query, orderBy, getDocs } from \"firebase/firestore\";\r\n\r\nfunction convertArrayOfObjectsToCSV(data) {\r\n  if (!data || !data.length) return null;\r\n\r\n  const keys = Object.keys(data[0]);\r\n  const csvRows = [];\r\n\r\n  // Header row\r\n  csvRows.push(keys.join(\",\"));\r\n\r\n  // Data rows\r\n  data.forEach(row => {\r\n    const values = keys.map(key => {\r\n      let escaped = (\"\" + (row[key] || \"\")).replace(/\"/g, '\"\"');\r\n      if (escaped.search(/(\"|,|\\n)/g) >= 0) escaped = `\"${escaped}\"`;\r\n      return escaped;\r\n    });\r\n    csvRows.push(values.join(\",\"));\r\n  });\r\n\r\n  return csvRows.join(\"\\n\");\r\n}\r\n\r\nexport default function MoodDataExport() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleExport = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const q = query(collection(db, \"moods\"), orderBy(\"createdAt\", \"asc\"));\r\n      const snapshot = await getDocs(q);\r\n\r\n      const moods = snapshot.docs.map(doc => {\r\n        const data = doc.data();\r\n        return {\r\n          mood: data.mood || \"\",\r\n          note: data.note || \"\",\r\n          createdAt: data.createdAt ? data.createdAt.toDate().toISOString() : \"\",\r\n        };\r\n      });\r\n\r\n      const csvData = convertArrayOfObjectsToCSV(moods);\r\n      if (!csvData) {\r\n        setError(\"No data available to export.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const blob = new Blob([csvData], { type: \"text/csv;charset=utf-8;\" });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement(\"a\");\r\n      link.href = url;\r\n      link.setAttribute(\"download\", \"mood_history.csv\");\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n\r\n    } catch (err) {\r\n      setError(\"Failed to export data.\");\r\n      console.error(err);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 400, margin: \"1rem auto\" }}>\r\n      <button\r\n        onClick={handleExport}\r\n        disabled={loading}\r\n        style={{ padding: \"10px 20px\", cursor: \"pointer\" }}\r\n      >\r\n        {loading ? \"Exporting...\" : \"Export Mood History as CSV\"}\r\n      </button>\r\n      {error && <p style={{ color: \"red\", marginTop: \"10px\" }}>{error}</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}